<?phpdefined('BASEPATH') OR exit('No direct script access allowed');class Circuitos_model extends MY_Model{	public function __construct()	{		parent::__construct();		$this->table_name = "circuitos";		$this->msg_name = 'Circuito';		$this->id_name = 'id';		$this->columnas = array('id', 'informe_infogov', 'plantilla_id');		$this->fields = array(			array('name' => 'informe_infogov', 'label' => 'Informe de Infogov', 'type' => 'integer', 'maxlength' => '10'),			array('name' => 'plantilla', 'label' => 'Plantilla', 'input_type' => 'combo', 'id_name' => 'plantilla_id')		);		$this->requeridos = array();		//$this->unicos = array();	}	/**	 * _can_delete: Devuelve true si puede eliminarse el registro.	 *	 * @param int $delete_id	 * @return bool	 */	protected function _can_delete($delete_id)	{		if ($this->db->where('circuito_id', $delete_id)->count_all_results('firmas_circuitos') > 0)		{			$this->_set_error('No se ha podido eliminar el registro de ' . $this->msg_name . '. Verifique que no estÃ© asociado a firmas de circuitos.');			return FALSE;		}		return TRUE;	}	public function get_circuito($plantilla_id)	{		$circuito = $this->db->select('c.id, COALESCE(MAX(orden),0)+1 orden')->from('circuitos c')->join('firmas_circuitos fc', 'c.id=fc.circuito_id', 'left')->where('c.plantilla_id', $plantilla_id)->group_by('c.id')->get()->row();		if (empty($circuito))		{			return FALSE;		}		else		{			return $circuito;		}	}	public function get_circuito_ii($informe_infogov_id)	{		$circuito = $this->db->select('c.id, COALESCE(MAX(orden),0)+1 orden')->from('circuitos c')->join('firmas_circuitos fc', 'c.id=fc.circuito_id', 'left')->where('c.informe_infogov', $informe_infogov_id)->group_by('c.id')->get()->row();		if (empty($circuito))		{			return FALSE;		}		else		{			return $circuito;		}	}}/* End of file Circuitos_model.php *//* Location: ./application/modules/expedientes/models/Circuitos_model.php */